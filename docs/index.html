<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>üé≤ Gerador de CPF V√°lido - Web</title>
    <script src="https://cdn.jsdelivr.net/npm/brython@3.12.0/brython.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/brython@3.12.0/brython_stdlib.js"></script>
    <link rel="stylesheet" href="./style.css?v=2">
</head>
<body onload="brython()">
    <!-- Canvas para n√∫meros caindo -->
    <canvas id="matrix-canvas"></canvas>
    
    <!-- Painel Glassmorphism -->
    <div class="glass-panel">
        <div class="container">
        <!-- Header -->
        <header class="header">
            <button id="btn-theme-toggle" class="theme-toggle" title="Alternar tema">
                <span class="theme-icon">üåô</span>
            </button>
            <h1>üé≤ Gerador de CPF V√°lido</h1>
            <p class="subtitle">Gerador educacional de CPF com valida√ß√£o por regi√£o fiscal</p>
        </header>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-button active" id="tab-aleatorio" onclick="switchTab('aleatorio')">
                üé≤ Gerador Aleat√≥rio
            </button>
            <button class="tab-button" id="tab-regiao" onclick="switchTab('regiao')">
                üó∫Ô∏è Por Regi√£o
            </button>
            <button class="tab-button" id="tab-validador" onclick="switchTab('validador')">
                üîç Validador
            </button>
        </div>

        <!-- Tab Content: Gerador Aleat√≥rio -->
        <div id="content-aleatorio" class="tab-content active">
            <div class="card">
                <h2>Gerador Aleat√≥rio</h2>
                <p>Gera um CPF v√°lido com regi√£o fiscal aleat√≥ria</p>
                
                <button id="btn-gerar-aleatorio" class="btn-primary">
                    üé≤ Gerar CPF Aleat√≥rio
                </button>
                
                <div id="resultado-aleatorio" class="resultado hidden">
                    <h3>‚úÖ CPF Gerado com Sucesso!</h3>
                    <div class="cpf-container">
                        <div class="cpf-display" id="cpf-aleatorio"></div>
                        <button id="btn-copiar-aleatorio" class="btn-copiar" title="Copiar CPF">
                            üìã Copiar
                        </button>
                    </div>
                    <div class="detalhes" id="detalhes-aleatorio"></div>
                </div>
            </div>
        </div>

        <!-- Tab Content: Por Regi√£o -->
        <div id="content-regiao" class="tab-content">
            <div class="card">
                <h2>Gerador por Regi√£o Fiscal</h2>
                <p>Escolha a regi√£o fiscal desejada</p>
                
                <div class="regioes-grid" id="regioes-grid">
                    <!-- Ser√° preenchido via Python -->
                </div>
                
                <div id="resultado-regiao" class="resultado hidden">
                    <h3>‚úÖ CPF Gerado com Sucesso!</h3>
                    <div class="cpf-container">
                        <div class="cpf-display" id="cpf-regiao"></div>
                        <button id="btn-copiar-regiao" class="btn-copiar" title="Copiar CPF">
                            üìã Copiar
                        </button>
                    </div>
                    <div class="detalhes" id="detalhes-regiao"></div>
                    <button id="btn-gerar-outro" class="btn-secondary">
                        üîÑ Gerar Outro CPF da Mesma Regi√£o
                    </button>
                </div>
            </div>
        </div>

        <!-- Tab Content: Validador -->
        <div id="content-validador" class="tab-content">
            <div class="card">
                <h2>Validador de CPF</h2>
                <p>Digite um CPF para verificar se √© v√°lido (aceita qualquer formato)</p>
                
                <div class="input-group">
                    <input type="text" id="input-cpf" class="input-cpf" 
                           placeholder="Digite o CPF (ex: 123.456.789-09)" 
                           maxlength="14">
                    <button id="btn-validar" class="btn-primary">
                        üîç Validar CPF
                    </button>
                </div>
                
                <div id="resultado-validador" class="resultado hidden">
                    <div id="status-validacao"></div>
                    <div id="detalhes-validacao"></div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="aviso">
                <strong>‚ö†Ô∏è IMPORTANTE:</strong> Este √© um projeto educacional. 
                Os CPFs gerados N√ÉO s√£o reais e N√ÉO devem ser utilizados para fins oficiais ou fraudulentos.
            </div>
            <div class="autor">
                <p>Desenvolvido com üíô e Python por <strong>Felipe Alc√¢ntara</strong></p>
                <p>Projeto: 2024 | Refatora√ß√£o e Web: 2025</p>
            </div>
        </footer>
    </div>
    </div> <!-- Fecha glass-panel -->

    <!-- Script JavaScript para Tabs -->
    <script>
        function switchTab(tabName) {
            // Remove active de todos os bot√µes e conte√∫dos
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Adiciona active ao bot√£o e conte√∫do clicados
            document.getElementById('tab-' + tabName).classList.add('active');
            document.getElementById('content-' + tabName).classList.add('active');
        }

        // Dark Mode Toggle
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.querySelector('.theme-icon');
            const isDark = body.classList.toggle('dark-mode');
            
            // Atualiza o √≠cone
            themeIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            
            // Salva a prefer√™ncia no localStorage
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        // Carrega a prefer√™ncia de tema ao carregar a p√°gina
        window.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.body.classList.add('dark-mode');
                document.querySelector('.theme-icon').textContent = '‚òÄÔ∏è';
            }
        });

        // Adiciona o evento de clique ao bot√£o
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('btn-theme-toggle').addEventListener('click', toggleTheme);
        });

        // ==================== RANDOM NUMBERS EFFECT ====================
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');

        // Ajusta o tamanho do canvas para a janela
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Array para armazenar os n√∫meros ativos
        let activeNumbers = [];
        
        // Classe para cada n√∫mero
        class FloatingNumber {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.number = Math.floor(Math.random() * 10);
                this.opacity = 1;
                this.fadeSpeed = Math.random() * 0.003 + 0.002; // Fade mais lento (era 0.02 + 0.01)
                this.size = Math.random() * 20 + 14; // tamanho entre 14 e 34
            }

            update() {
                this.opacity -= this.fadeSpeed;
                return this.opacity > 0;
            }

            draw() {
                const isDarkMode = document.body.classList.contains('dark-mode');
                
                // Adiciona efeito de brilho (glow) - mais intenso no tema claro
                ctx.shadowBlur = isDarkMode ? 15 : 20;
                ctx.shadowColor = isDarkMode 
                    ? `rgba(255, 255, 255, ${this.opacity * 0.8})` 
                    : `rgba(0, 0, 0, ${this.opacity * 0.9})`;
                
                ctx.fillStyle = isDarkMode 
                    ? `rgba(255, 255, 255, ${this.opacity})` // Branco no dark mode
                    : `rgba(0, 0, 0, ${this.opacity})`; // Preto no tema claro
                ctx.font = `bold ${this.size}px monospace`;
                ctx.fillText(this.number, this.x, this.y);
                
                // Reset shadow para n√£o afetar outros desenhos
                ctx.shadowBlur = 0;
            }
        }

        function animate() {
            // Limpa o canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Adiciona novos n√∫meros aleatoriamente com maior frequ√™ncia
            if (Math.random() < 0.7) { // 70% de chance a cada frame (era 30%)
                activeNumbers.push(new FloatingNumber());
            }

            // Atualiza e desenha n√∫meros ativos
            activeNumbers = activeNumbers.filter(num => {
                const alive = num.update();
                if (alive) {
                    num.draw();
                }
                return alive;
            });

            requestAnimationFrame(animate);
        }

        // Inicia a anima√ß√£o
        animate();
    </script>

    <!-- Script Python com Brython -->
    <script type="text/python" src="./gerador.py"></script>
</body>
</html>
